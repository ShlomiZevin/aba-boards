<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”×•×¡×¤×ª ×¢×œ×× ×œ××¢×¨×›×ª</title>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #764ba2;
            text-align: center;
        }
        .kid-info {
            background: #f5f0ff;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .kid-info h3 {
            margin-top: 0;
            color: #764ba2;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0d5f5;
        }
        .info-row:last-child {
            border-bottom: none;
        }
        .tasks-list, .rewards-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .tasks-list h4, .rewards-list h4 {
            margin-top: 0;
            color: #667eea;
        }
        .task-item, .reward-item {
            padding: 8px 12px;
            background: white;
            margin: 8px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        button.secondary {
            background: #6c757d;
        }
        #status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’œ ×”×•×¡×¤×ª ×¢×œ×× ×œ××¢×¨×›×ª ğŸ’œ</h1>

        <div class="kid-info">
            <h3>×¤×¨×˜×™ ×”×™×œ×“×”</h3>
            <div class="info-row"><span>×©×:</span><span>×¢×œ××</span></div>
            <div class="info-row"><span>×’×™×œ:</span><span>5</span></div>
            <div class="info-row"><span>××’×“×¨:</span><span>×‘×ª</span></div>
            <div class="info-row"><span>×¢×¨×›×ª ×¦×‘×¢×™×:</span><span>×¡×’×•×œ</span></div>
            <div class="info-row"><span>×¡×•×’ ××˜×‘×¢:</span><span>× ×§×•×“×•×ª</span></div>
            <div class="info-row"><span>×¤×¨×¡ ×™×•××™:</span><span>5 × ×§×•×“×•×ª</span></div>
            <div class="info-row"><span>×“×™× ×•:</span><span>âœ… ×›×Ÿ</span></div>
            <div class="info-row"><span>×¦×œ×™×œ×™×:</span><span>âœ… ×›×Ÿ</span></div>
        </div>

        <div class="tasks-list">
            <h4>××©×™××•×ª ×™×•××™×•×ª (12)</h4>
            <div class="task-item">ğŸ›ï¸ ×œ×¡×“×¨ ××ª ×”××™×˜×”</div>
            <div class="task-item">ğŸ‘Ÿ ×œ× ×¢×•×œ × ×¢×œ×™×™×</div>
            <div class="task-item">ğŸ± ×§×•×¤×¡×ª ××•×›×œ ×‘×›×™×•×¨</div>
            <div class="task-item">ğŸ’§ ×‘×§×‘×•×§ ××™× ×‘×©×™×©</div>
            <div class="task-item">ğŸ’ ×ª×™×§ ×‘××§×•×</div>
            <div class="task-item">ğŸ‘ × ×¢×œ×™×™× ×‘××§×•×</div>
            <div class="task-item">ğŸ“ ×“×£ ×¢×‘×•×“×”</div>
            <div class="task-item">ğŸ§¹ ××˜×œ×” ×™×•××™×ª</div>
            <div class="task-item">ğŸ ×œ××›×•×œ ×¤×¨×™</div>
            <div class="task-item">ğŸ¬ ×œ××›×•×œ ×¨×§ ×××ª×§ 1 ×‘×™×•×</div>
            <div class="task-item">ğŸ½ï¸ ×œ×¤× ×•×ª ×›×œ×™× ××—×¨×™ ×”××¨×•×—×”</div>
            <div class="task-item">ğŸ‘• ×‘×’×“×™× ×‘×¡×œ ×›×‘×™×¡×”</div>
        </div>

        <div class="rewards-list">
            <h4>×¤×¨×¡×™× (10)</h4>
            <div class="reward-item">ğŸ 10 × ×§' - ×œ×‘×—×•×¨ ×”×¤×ª×¢×” ××”×©×§×™×ª</div>
            <div class="reward-item">ğŸ¬ 15 × ×§' - ×œ×‘×—×•×¨ ×¡×¨×˜ ×œ×¢×¨×‘ ××©×¤×—×ª×™</div>
            <div class="reward-item">ğŸ 20 × ×§' - ×œ×‘×—×•×¨ ××¨×•×—×ª ×¢×¨×‘</div>
            <div class="reward-item">ğŸ’† 20 × ×§' - ×¡×¤× ××¤× ×§</div>
            <div class="reward-item">ğŸ² 20 × ×§' - ××©×—×§ ×§×•×¤×¡×” ×¢× ×”×•×¨×”</div>
            <div class="reward-item">ğŸ¦ 30 × ×§' - ×’×œ×™×“×” ×¢× ×”×•×¨×”</div>
            <div class="reward-item">ğŸ§ 60 × ×§' - ××¤×™×™×” ××©×•×ª×¤×ª</div>
            <div class="reward-item">ğŸ‘§ 80 × ×§' - ×¢×¨×‘ ×‘× ×•×ª (×¤×™×’'××•×ª, ×¡×¨×˜, ×¤×•×¤×§×•×¨×Ÿ)</div>
            <div class="reward-item">ğŸ§º 500 × ×§' - ×¤×™×§× ×™×§</div>
            <div class="reward-item">ğŸ‰ 1000 × ×§' - ×™×•× ×”×›×Ÿ</div>
        </div>

        <button onclick="addAlma()">ğŸŒŸ ×”×•×¡×£ ××ª ×¢×œ×× ×œ××¢×¨×›×ª</button>
        
        <div id="status"></div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDHE7FKHJ92rXXfz_3hLX8e9s8lC9g9g9o",
            authDomain: "aba-ai-d74f5.firebaseapp.com",
            projectId: "aba-ai-d74f5",
            storageBucket: "aba-ai-d74f5.firebasestorage.app",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function addAlma() {
            const statusDiv = document.getElementById('status');
            statusDiv.style.display = 'block';
            statusDiv.className = 'info';
            statusDiv.textContent = '××•×¡×™×£ ××ª ×¢×œ×× ×œ××¢×¨×›×ª...';

            const kidId = 'alma';

            try {
                // Check if ×¢×œ×× already exists
                const existingDoc = await db.collection('kids').doc(kidId).get();
                if (existingDoc.exists) {
                    statusDiv.className = 'error';
                    statusDiv.textContent = '×¢×œ×× ×›×‘×¨ ×§×™×™××ª ×‘××¢×¨×›×ª! ×× × ××—×§ ××•×ª×” ×§×•×“× ××¢××•×“ ×”× ×™×”×•×œ.';
                    return;
                }

                // Board layout with all tasks and goals
                const boardLayout = {
                    items: [
                        // Bank (piggy bank)
                        {
                            id: 1,
                            type: 'bank',
                            label: '×§×•×¤×ª ×”×—×™×¡×›×•×Ÿ ×©×œ ×¢×œ××'
                        },
                        // Progress bar
                        {
                            id: 2,
                            type: 'progress',
                            title: '×”×”×ª×§×“××•×ª ×©×œ×™ ×”×™×•×'
                        },
                        // Regular tasks header
                        {
                            id: 3,
                            type: 'header',
                            size: 'medium',
                            text: 'âœ¨ ×”××©×™××•×ª ×©×œ×™ âœ¨'
                        },
                        // Task 1
                        {
                            id: 4,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 1,
                                icon: 'ğŸ›ï¸',
                                title: '×œ×¡×“×¨ ××ª ×”××™×˜×”',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 2
                        {
                            id: 5,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 2,
                                icon: 'ğŸ‘Ÿ',
                                title: '×œ× ×¢×•×œ × ×¢×œ×™×™×',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 3
                        {
                            id: 6,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 3,
                                icon: 'ğŸ±',
                                title: '×§×•×¤×¡×ª ××•×›×œ ×‘×›×™×•×¨',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4] // Kindergarten days
                            }
                        },
                        // Task 4
                        {
                            id: 7,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 4,
                                icon: 'ğŸ’§',
                                title: '×‘×§×‘×•×§ ××™× ×‘×©×™×©',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 5
                        {
                            id: 8,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 5,
                                icon: 'ğŸ’',
                                title: '×ª×™×§ ×‘××§×•×',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 6
                        {
                            id: 9,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 6,
                                icon: 'ğŸ‘',
                                title: '× ×¢×œ×™×™× ×‘××§×•×',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 7
                        {
                            id: 10,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 7,
                                icon: 'ğŸ“',
                                title: '×“×£ ×¢×‘×•×“×”',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4] // Weekdays
                            }
                        },
                        // Task 8
                        {
                            id: 11,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 8,
                                icon: 'ğŸ§¹',
                                title: '××˜×œ×” ×™×•××™×ª',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 9
                        {
                            id: 12,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 9,
                                icon: 'ğŸ',
                                title: '×œ××›×•×œ ×¤×¨×™',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 10
                        {
                            id: 13,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 10,
                                icon: 'ğŸ¬',
                                title: '×œ××›×•×œ ×¨×§ ×××ª×§ 1 ×‘×™×•×',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 11
                        {
                            id: 14,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 11,
                                icon: 'ğŸ½ï¸',
                                title: '×œ×¤× ×•×ª ×›×œ×™× ××—×¨×™ ×”××¨×•×—×”',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Task 12
                        {
                            id: 15,
                            type: 'task',
                            taskType: 'regular',
                            taskData: {
                                id: 12,
                                icon: 'ğŸ‘•',
                                title: '×‘×’×“×™× ×‘×¡×œ ×›×‘×™×¡×”',
                                type: 'regular',
                                requiresTestimony: false,
                                trackTime: false,
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Calm down header
                        {
                            id: 16,
                            type: 'header',
                            size: 'medium',
                            text: 'ğŸ§˜ ×¤×™× ×ª ×”×”×¨×’×¢×” ğŸ§˜'
                        },
                        // Calm down - Paint
                        {
                            id: 17,
                            type: 'task',
                            taskType: 'calm-down',
                            taskData: {
                                id: 13,
                                icon: 'ğŸ¨',
                                title: '×œ×•×— ×¦×™×•×¨',
                                type: 'calm-down',
                                activityType: 'paint',
                                activeDays: [0, 1, 2, 3, 4, 5, 6]
                            }
                        },
                        // Goals header
                        {
                            id: 18,
                            type: 'header',
                            size: 'medium',
                            text: 'ğŸ ×”×¤×¨×¡×™× ×©×œ×™ ğŸ'
                        },
                        // Goal 1 - 10 points
                        {
                            id: 19,
                            type: 'goal',
                            icon: 'ğŸ',
                            title: '×œ×‘×—×•×¨ ×”×¤×ª×¢×” ××”×©×§×™×ª',
                            pointsRequired: 10
                        },
                        // Goal 2 - 15 points
                        {
                            id: 20,
                            type: 'goal',
                            icon: 'ğŸ¬',
                            title: '×œ×‘×—×•×¨ ×¡×¨×˜ ×œ×¢×¨×‘ ××©×¤×—×ª×™',
                            pointsRequired: 15
                        },
                        // Goal 3 - 20 points
                        {
                            id: 21,
                            type: 'goal',
                            icon: 'ğŸ',
                            title: '×œ×‘×—×•×¨ ××¨×•×—×ª ×¢×¨×‘',
                            pointsRequired: 20
                        },
                        // Goal 4 - 20 points
                        {
                            id: 22,
                            type: 'goal',
                            icon: 'ğŸ’†',
                            title: '×¡×¤× ××¤× ×§',
                            pointsRequired: 20
                        },
                        // Goal 5 - 20 points
                        {
                            id: 23,
                            type: 'goal',
                            icon: 'ğŸ²',
                            title: '××©×—×§ ×§×•×¤×¡×” ×¢× ×”×•×¨×”',
                            pointsRequired: 20
                        },
                        // Goal 6 - 30 points
                        {
                            id: 24,
                            type: 'goal',
                            icon: 'ğŸ¦',
                            title: '×’×œ×™×“×” ×¢× ×”×•×¨×”',
                            pointsRequired: 30
                        },
                        // Goal 7 - 60 points
                        {
                            id: 25,
                            type: 'goal',
                            icon: 'ğŸ§',
                            title: '××¤×™×™×” ××©×•×ª×¤×ª',
                            pointsRequired: 60
                        },
                        // Goal 8 - 80 points
                        {
                            id: 26,
                            type: 'goal',
                            icon: 'ğŸ‘§',
                            title: '×¢×¨×‘ ×‘× ×•×ª - ×¤×™×’\'××•×ª, ×¡×¨×˜, ×¤×•×¤×§×•×¨×Ÿ',
                            pointsRequired: 80
                        },
                        // Goal 9 - 500 points
                        {
                            id: 27,
                            type: 'goal',
                            icon: 'ğŸ§º',
                            title: '×¤×™×§× ×™×§',
                            pointsRequired: 500
                        },
                        // Goal 10 - 1000 points
                        {
                            id: 28,
                            type: 'goal',
                            icon: 'ğŸ‰',
                            title: '×™×•× ×”×›×Ÿ',
                            pointsRequired: 1000
                        }
                    ]
                };

                // Create tasks array for backward compatibility
                const tasks = boardLayout.items
                    .filter(item => item.type === 'task' && item.taskType === 'regular')
                    .map(item => item.taskData);

                // Create ×¢×œ××'s complete data
                const almaData = {
                    name: '×¢×œ××',
                    imageName: '',
                    age: 5,
                    gender: 'girl',
                    kidDescription: '××•×”×‘×ª ×œ×©×—×§, ×œ××¨×•×— ×œ×§, ×–××Ÿ ××™×›×•×ª, ×¤×¨×¡×™× ×§×˜× ×™×',
                    behaviorGoals: '',
                    personalInfo: '',

                    // Board
                    tasks: tasks,
                    boardLayout: boardLayout,

                    // State
                    completedTasks: [],
                    completedBonusTasks: [],
                    bonusRewardsEarned: {},
                    totalMoney: 0,

                    // Rewards
                    dailyReward: 5,
                    coinStyle: 'points',
                    coinImageName: '',

                    // Display
                    colorSchema: 'purple',
                    headerLabel: '',
                    savingsLabel: '×”× ×§×•×“×•×ª ×©×œ×™',
                    regularTasksHeader: 'âœ¨ ×”××©×™××•×ª ×©×œ×™ âœ¨',
                    bonusTasksHeader: 'ğŸ’° ××©×™××•×ª ×‘×•× ×•×¡ ğŸ’°',
                    calmDownHeader: 'ğŸ§˜ ×¤×™× ×ª ×”×”×¨×’×¢×” ğŸ§˜',

                    // Features
                    showDino: true,
                    soundsEnabled: true,
                    builderPin: '1234',

                    // Timestamps
                    todayRewardGiven: false,
                    lastResetDate: new Date().toDateString(),
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),

                    // Parent info (for reference)
                    parentInfo: {
                        parentName: '×¨×—×œ×™ ×“× ×•×š',
                        email: 'Racheli.vag@gmail.com',
                        phone: '0504731907'
                    }
                };

                await db.collection('kids').doc(kidId).set(almaData);

                statusDiv.className = 'success';
                statusDiv.innerHTML = `
                    <strong>×”×¦×œ×—×”! ğŸ‰</strong><br>
                    ×¢×œ×× × ×•×¡×¤×” ×œ××¢×¨×›×ª ×¢× ${tasks.length} ××©×™××•×ª ×•-10 ×¤×¨×¡×™×!<br><br>
                    <a href="board.html?kid=${kidId}" style="color: #764ba2; font-weight: bold;">ğŸ’œ ×œ×—×¦×™ ×›××Ÿ ×œ×¢×‘×•×¨ ×œ×œ×•×— ×©×œ ×¢×œ××</a><br><br>
                    <a href="board-builder.html?kid=${kidId}" style="color: #667eea; font-weight: bold;">ğŸ› ï¸ ×¢×¨×™×›×ª ×”×œ×•×— ×‘×‘×•× ×” ×”×œ×•×—×•×ª</a><br><br>
                `;

            } catch (error) {
                console.error('Error adding ×¢×œ××:', error);
                statusDiv.className = 'error';
                statusDiv.innerHTML = `
                    <strong>×©×’×™××”!</strong><br>
                    ${error.message}<br><br>
                    <small>× × ×œ×•×•×“× ×©×”×’×“×¨×ª ××ª Firestore ×‘×¤×¨×•×™×§×˜ Firebase ×©×œ×š.</small>
                `;
            }
        }
    </script>
</body>
</html>
